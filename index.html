<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Functions to Handle and Preprocess Infrared Spectra • ir</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Functions to Handle and Preprocess Infrared Spectra">
<meta name="description" content="Functions to import and handle infrared spectra (import from .csv and Thermo Galactics .spc, baseline correction, binning, clipping, interpolating, smoothing, averaging, adding, subtracting, dividing, multiplying, atmospheric correction, tidyverse' methods, plotting).">
<meta property="og:description" content="Functions to import and handle infrared spectra (import from .csv and Thermo Galactics .spc, baseline correction, binning, clipping, interpolating, smoothing, averaging, adding, subtracting, dividing, multiplying, atmospheric correction, tidyverse' methods, plotting).">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">ir</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/ir-introduction.html">Introduction to the 'ir' package</a></li>
    <li><a class="dropdown-item" href="articles/ir-class.html">Introduction to the `ir`class</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><a class="dropdown-item" href="news/index.html">News</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/henningte/ir/" aria-label="View on GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="ir-">ir <img src="reference/figures/logo-hex.png" align="right" height="139" alt="logo" style="float:right; height:200px;"><a class="anchor" aria-label="anchor" href="#ir-"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>‘ir’ is an R package to import, handle and preprocess infrared spectra. Infrared spectra are stored as list columns in data frames which enables efficient storage of metadata along with the spectra and using ‘tidyverse’ functions for data operations.</p>
<p><strong>Spectra in the following formats can be imported:</strong></p>
<ol style="list-style-type: decimal">
<li>
<code>csv</code> files with individual spectra.</li>
<li>Thermo Galactic’s <code>spc</code> files with individual spectra.</li>
</ol>
<p><strong>Functions for spectral preprocessing and data handling:</strong></p>
<ol style="list-style-type: decimal">
<li>baseline correction with:
<ul>
<li>a polynomial baseline</li>
<li>a convex hull baseline</li>
<li>a Savitzky-Golay baseline (Lasch 2012)</li>
</ul>
</li>
<li>binning</li>
<li>clipping</li>
<li>interpolating (resampling, linearly)</li>
<li>replacing selected parts of a spectrum by a straight line</li>
<li>averaging spectra within specified groups</li>
<li>normalizing spectra:
<ul>
<li>to the maximum intensity</li>
<li>to the intensity at a specific x value</li>
<li>so that all intensity values sum to 1</li>
<li>vector normalization</li>
<li>Standard Normal Variate correction</li>
</ul>
</li>
<li>smoothing:
<ul>
<li>Savitzky-Golay smoothing</li>
<li>Fourier smoothing</li>
</ul>
</li>
<li>computing derivatives of spectra using Savitzky-Golay smoothing</li>
<li>spectral arithmetic (addition, subtraction, multiplication, division)</li>
<li>computing the variance of intensity values (optionally after subtracting reference spectra)</li>
<li>computing maxima, minima, median, and ranges of intensity values of spectra</li>
<li>Atmospheric background correction (Perez-Guaita et al. 2013)</li>
<li>Scaling intensity values in spectra</li>
<li>Wrapper to sampling algorithms implemented in the ‘prospectr’ package.</li>
<li>plotting</li>
<li>
<a href="https://www.tidyverse.org/" class="external-link">tidyverse</a> methods</li>
</ol>
<div class="section level3">
<h3 id="how-to-install">How to install<a class="anchor" aria-label="anchor" href="#how-to-install"></a>
</h3>
<p>You can install ‘ir’ from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"ir"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version of ‘ir’ from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span>repo <span class="op">=</span> <span class="st">"henningte/ir"</span>, ref <span class="op">=</span> <span class="st">"dev"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="how-to-use">How to use<a class="anchor" aria-label="anchor" href="#how-to-use"></a>
</h3>
<p>Load ‘ir’:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load ir package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://henningte.github.io/ir/">ir</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load additional packages needed for this tutorial</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>For brief introductions, see below and the two vignettes:</p>
<ol style="list-style-type: decimal">
<li><a href="https://henningte.github.io/ir/articles/ir-introduction.html">Introduction to the ‘ir’ package</a></li>
<li><a href="https://henningte.github.io/ir/articles/ir-class.html">Introduction to the <code>ir</code>class</a></li>
</ol>
<div class="section level4">
<h4 id="sample-workflow">Sample workflow<a class="anchor" aria-label="anchor" href="#sample-workflow"></a>
</h4>
<p>Here is an example preprocessing pipeline for the sample data in the package (<code>ir_sample_data</code>) which does baseline correction, binning (bin width of 10), normalization (so that the maximum intensity value is 1 and the minimum intensity value is 0), and finally plots the preprocessed spectra for each sample and sample type:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ir_sample_data</span> <span class="op">|&gt;</span>                                      <span class="co"># data</span></span>
<span>  <span class="fu">ir</span><span class="fu">::</span><span class="fu"><a href="reference/ir_bc.html">ir_bc</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"rubberband"</span><span class="op">)</span> <span class="op">|&gt;</span>                  <span class="co"># baseline correction</span></span>
<span>  <span class="fu">ir</span><span class="fu">::</span><span class="fu"><a href="reference/ir_bin.html">ir_bin</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span>                            <span class="co"># binning</span></span>
<span>  <span class="fu">ir</span><span class="fu">::</span><span class="fu"><a href="reference/ir_normalize.html">ir_normalize</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"zeroone"</span><span class="op">)</span> <span class="op">|&gt;</span>              <span class="co"># normalization</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">sample_type</span><span class="op">)</span>          <span class="co"># plot</span></span></code></pre></div>
<p><img src="reference/figures/README-sample_data_workflow-1.png"><!-- --></p>
</div>
<div class="section level4">
<h4 id="data-structure">Data structure<a class="anchor" aria-label="anchor" href="#data-structure"></a>
</h4>
<p>You can load the sample data with:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ir</span><span class="fu">::</span><span class="va"><a href="reference/ir_sample_data.html">ir_sample_data</a></span></span>
<span><span class="co">#&gt; # A tibble: 58 × 7</span></span>
<span><span class="co">#&gt;    id_measurement id_sample sample_type sample_comment             klason_lignin</span></span>
<span><span class="co">#&gt;             &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;                      &lt;units&gt;      </span></span>
<span><span class="co">#&gt;  1              1 GN 11-389 needles     Abies Firma Momi fir       0.359944     </span></span>
<span><span class="co">#&gt;  2              2 GN 11-400 needles     Cupressocyparis leylandii… 0.339405     </span></span>
<span><span class="co">#&gt;  3              3 GN 11-407 needles     Juniperus chinensis Chine… 0.267552     </span></span>
<span><span class="co">#&gt;  4              4 GN 11-411 needles     Metasequoia glyptostroboi… 0.350016     </span></span>
<span><span class="co">#&gt;  5              5 GN 11-416 needles     Pinus strobus Torulosa     0.331100     </span></span>
<span><span class="co">#&gt;  6              6 GN 11-419 needles     Pseudolarix amabili Golde… 0.279360     </span></span>
<span><span class="co">#&gt;  7              7 GN 11-422 needles     Sequoia sempervirens Cali… 0.329672     </span></span>
<span><span class="co">#&gt;  8              8 GN 11-423 needles     Taxodium distichum Cascad… 0.356950     </span></span>
<span><span class="co">#&gt;  9              9 GN 11-428 needles     Thuja occidentalis Easter… 0.369360     </span></span>
<span><span class="co">#&gt; 10             10 GN 11-434 needles     Tsuga caroliniana Carolin… 0.289050     </span></span>
<span><span class="co">#&gt; # ℹ 48 more rows</span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: holocellulose &lt;units&gt;, spectra &lt;named list&gt;</span></span></code></pre></div>
<p><code>ir_sample_data</code> is an object of class <code>ir</code>. An Object of class <code>ir</code> is a data frame where each row represents one infrared measurement and column <code>spectra</code> contains the infrared spectra (one per row) as list column. This allows to store metadata along each spectrum (for example the N content for each sample) and to manipulate <code>ir</code> objects with ‘tidyverse’ functions.</p>
<p>The column <code>spectra</code> is a list column of data frames, meaning that each cell of <code>spectra</code> contains a data frame which contains the data for one spectrum. For example, here are the first rows of the first spectrum in <code>ir_smaple_data</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View the first ten rows of the first spectrum in ir_sample_data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ir_sample_data</span><span class="op">$</span><span class="va">spectra</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 2</span></span>
<span><span class="co">#&gt;       x        y</span></span>
<span><span class="co">#&gt;   &lt;int&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1  4000 0.000361</span></span>
<span><span class="co">#&gt; 2  3999 0.000431</span></span>
<span><span class="co">#&gt; 3  3998 0.000501</span></span>
<span><span class="co">#&gt; 4  3997 0.000571</span></span>
<span><span class="co">#&gt; 5  3996 0.000667</span></span>
<span><span class="co">#&gt; 6  3995 0.000704</span></span></code></pre></div>
<p>Column <code>x</code> contains values for the spectral channel (in this case wavenumbers [cm<sup>-1</sup>]) and column <code>y</code> the corresponding intensity values.</p>
</div>
</div>
<div class="section level3">
<h3 id="how-to-cite">How to cite<a class="anchor" aria-label="anchor" href="#how-to-cite"></a>
</h3>
<p>Please cite this R package as:</p>
<blockquote>
<p>Henning Teickner (2025). <em>ir: Functions to Handle and Preprocess Infrared Spectra</em>. DOI: 10.5281/zenodo.5747169. Accessed 06 Apr 2025. Online at <a href="https://zenodo.org/record/5747169" class="external-link uri">https://zenodo.org/record/5747169</a>.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="companion-packages">Companion packages<a class="anchor" aria-label="anchor" href="#companion-packages"></a>
</h3>
<p>The <a href="https://github.com/henningte/irpeat/" class="external-link">irpeat</a> package provides functions to analyze infrared spectra of peat (humification indices, prediction models) and uses the ‘ir’ package to handle spectral data.</p>
</div>
<div class="section level3">
<h3 id="licenses">Licenses<a class="anchor" aria-label="anchor" href="#licenses"></a>
</h3>
<p><strong>Text and figures :</strong> <a href="https://creativecommons.org/licenses/by/4.0/" class="external-link">CC BY 4.0</a></p>
<p><strong>Code :</strong> See the <a href="DESCRIPTION">DESCRIPTION</a> file</p>
<p><strong>Data :</strong> <a href="https://creativecommons.org/licenses/by/4.0/" class="external-link">CC BY 4.0</a> attribution requested in reuse. See the sources section for data sources and how to give credit to the original author(s) and the source.</p>
</div>
<div class="section level3">
<h3 id="contributions">Contributions<a class="anchor" aria-label="anchor" href="#contributions"></a>
</h3>
<p>We welcome contributions from everyone. Before you get started, please see our <a href="CONTRIBUTING.html">contributor guidelines</a>. Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div class="section level3">
<h3 id="sources">Sources<a class="anchor" aria-label="anchor" href="#sources"></a>
</h3>
<p><code>ir_sample_data</code> is derived from Hodgkins et al. (2018) and was reformatted to match the requirements of ‘ir’. The original article containing the data can be downloaded from <a href="https://www.nature.com/articles/s41467-018-06050-2" class="external-link uri">https://www.nature.com/articles/s41467-018-06050-2</a> and is distributed under the Creative Commons Attribution 4.0 International License (<a href="https://creativecommons.org/licenses/by/4.0/" class="external-link uri">https://creativecommons.org/licenses/by/4.0/</a>). The data on Klason lignin and holocellulose content are originally from De la Cruz, Osborne, and Barlaz (2016).</p>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-DelaCruz.2016" class="csl-entry">
De la Cruz, Florentino B., Jason Osborne, and Morton A. Barlaz. 2016. “Determination of Sources of Organic Matter in Solid Waste by Analysis of Phenolic Copper Oxide Oxidation Products of Lignin.” <em>Journal of Environmental Engineering</em> 142 (2): 04015076. <a href="https://doi.org/10.1061/(ASCE)EE.1943-7870.0001038" class="external-link uri">https://doi.org/10.1061/(ASCE)EE.1943-7870.0001038</a>.
</div>
<div id="ref-Hodgkins.2018" class="csl-entry">
Hodgkins, Suzanne B., Curtis J. Richardson, René Dommain, Hongjun Wang, Paul H. Glaser, Brittany Verbeke, B. Rose Winkler, et al. 2018. “Tropical Peatland Carbon Storage Linked to Global Latitudinal Trends in Peat Recalcitrance.” <em>Nature Communications</em> 9 (1): 3640. <a href="https://doi.org/10.1038/s41467-018-06050-2" class="external-link uri">https://doi.org/10.1038/s41467-018-06050-2</a>.
</div>
<div id="ref-Lasch.2012" class="csl-entry">
Lasch, Peter. 2012. “Spectral Pre-Processing for Biomedical Vibrational Spectroscopy and Microspectroscopic Imaging.” <em>Chemometrics and Intelligent Laboratory Systems</em> 117 (August): 100–114. <a href="https://doi.org/10.1016/j.chemolab.2012.03.011" class="external-link uri">https://doi.org/10.1016/j.chemolab.2012.03.011</a>.
</div>
<div id="ref-Perez-Guaita.2013" class="csl-entry">
Perez-Guaita, David, Julia Kuligowski, Guillermo Quintás, Salvador Garrigues, and Miguel de la Guardia. 2013. “Atmospheric Compensation in Fourier Transform Infrared (FT-IR) Spectra of Clinical Samples.” <em>Applied Spectroscopy</em> 67 (11): 1339–42. <a href="https://doi.org/10.1366/13-07159" class="external-link uri">https://doi.org/10.1366/13-07159</a>.
</div>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=ir" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/henningte/ir/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/henningte/ir/issues/" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ir</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Henning Teickner <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-3993-1182" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://zenodo.org/badge/latestdoi/234117897" class="external-link"><img src="https://zenodo.org/badge/234117897.svg" alt="DOI"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://CRAN.R-project.org/package=ir" class="external-link"><img src="https://www.r-pkg.org/badges/version/ir" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Henning Teickner.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
